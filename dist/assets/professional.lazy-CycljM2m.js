import{H as C,r as h,ag as N,ah as b,ai as r,j as e,aN as F,aO as a,aP as i,aQ as t,aR as l,I as d,aS as c,aY as S,at as E,B as I,J as j,c as P}from"./index-DFSfWVwN.js";import{p as O,C as q}from"./profile.service-CpCIw-bN.js";import{I as g}from"./image-upload-DNgzRhgK.js";const Y=r.object({occupation:r.string().min(2,{message:"Occupation is required."}),professional:r.object({qualification:r.string().optional(),profession:r.string().optional(),position:r.string().optional(),category:r.string().optional(),yearsOfExperience:r.number().min(0).max(100).optional(),summary:r.string().max(500).optional(),university:r.string().optional(),passoutYear:r.number().min(1900).max(new Date().getFullYear()).optional(),degreeCert:r.string().optional(),experienceCert:r.string().optional()}).optional()});function U(){const{user:n}=C(),[m,x]=h.useState(!0),o=N({resolver:b(Y),defaultValues:{occupation:(n==null?void 0:n.occupation)||"",professional:(n==null?void 0:n.professional)||{qualification:void 0,profession:void 0,position:void 0,category:void 0,yearsOfExperience:void 0,summary:void 0,university:void 0,passoutYear:void 0,degreeCert:void 0,experienceCert:void 0}},mode:"onChange"});h.useEffect(()=>{n&&(o.reset({occupation:n.occupation,professional:n.professional||{qualification:void 0,profession:void 0,position:void 0,category:void 0,yearsOfExperience:void 0,summary:void 0,university:void 0,passoutYear:void 0,degreeCert:void 0,experienceCert:void 0}}),x(!1))},[n,o]);const v=async s=>{var p,f;try{x(!0),JSON.stringify(s.professional)!==JSON.stringify(n==null?void 0:n.professional)?(await O.requestUpdate({updates:{professional:s.professional},type:"SENSITIVE"})).data.success&&j.success("Professional details update request sent for approval"):j.info("No changes detected in professional details")}catch(u){const y=u;j.error(((f=(p=y.response)==null?void 0:p.data)==null?void 0:f.message)||"Failed to update professional details")}finally{x(!1)}};return e.jsx(e.Fragment,{children:m?e.jsx("div",{className:"text-center text-muted-foreground",children:"Loading professional details..."}):e.jsx(F,{...o,children:e.jsxs("form",{id:"professional-form",onSubmit:o.handleSubmit(v),className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Professional Details"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Update your professional information (requires admin approval, can only be updated every 3 months)"})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsx(a,{control:o.control,name:"occupation",render:({field:s})=>e.jsxs(i,{children:[e.jsx(t,{children:"Occupation"}),e.jsx(l,{children:e.jsx(d,{...s})}),e.jsx(c,{})]})}),e.jsx(a,{control:o.control,name:"professional.qualification",render:({field:s})=>e.jsxs(i,{children:[e.jsx(t,{children:"Qualification"}),e.jsx(l,{children:e.jsx(d,{...s})}),e.jsx(c,{})]})}),e.jsx(a,{control:o.control,name:"professional.profession",render:({field:s})=>e.jsxs(i,{children:[e.jsx(t,{children:"Profession"}),e.jsx(l,{children:e.jsx(d,{...s})}),e.jsx(c,{})]})}),e.jsx(a,{control:o.control,name:"professional.position",render:({field:s})=>e.jsxs(i,{children:[e.jsx(t,{children:"Position"}),e.jsx(l,{children:e.jsx(d,{...s})}),e.jsx(c,{})]})}),e.jsx(a,{control:o.control,name:"professional.category",render:({field:s})=>e.jsxs(i,{children:[e.jsx(t,{children:"Category"}),e.jsx(l,{children:e.jsx(d,{...s})}),e.jsx(c,{})]})}),e.jsx(a,{control:o.control,name:"professional.yearsOfExperience",render:({field:s})=>e.jsxs(i,{children:[e.jsx(t,{children:"Years of Experience"}),e.jsx(l,{children:e.jsx(d,{type:"number",...s,onChange:p=>s.onChange(parseInt(p.target.value,10))})}),e.jsx(c,{})]})}),e.jsx(a,{control:o.control,name:"professional.university",render:({field:s})=>e.jsxs(i,{children:[e.jsx(t,{children:"University"}),e.jsx(l,{children:e.jsx(d,{...s})}),e.jsx(c,{})]})}),e.jsx(a,{control:o.control,name:"professional.passoutYear",render:({field:s})=>e.jsxs(i,{children:[e.jsx(t,{children:"Passout Year"}),e.jsx(l,{children:e.jsx(d,{type:"number",...s,onChange:p=>s.onChange(parseInt(p.target.value,10))})}),e.jsx(c,{})]})}),e.jsx(a,{control:o.control,name:"professional.summary",render:({field:s})=>e.jsxs(i,{className:"sm:col-span-2",children:[e.jsx(t,{children:"Summary"}),e.jsx(l,{children:e.jsx(S,{...s})}),e.jsx(c,{})]})}),e.jsx(a,{control:o.control,name:"professional.degreeCert",render:({field:s})=>e.jsxs(i,{children:[e.jsx(t,{children:"Degree Certificate"}),e.jsx(l,{children:e.jsx(g,{value:s.value,onChange:s.onChange,onRemove:()=>s.onChange("")})}),e.jsx(c,{})]})}),e.jsx(a,{control:o.control,name:"professional.experienceCert",render:({field:s})=>e.jsxs(i,{children:[e.jsx(t,{children:"Experience Certificate"}),e.jsx(l,{children:e.jsx(g,{value:s.value,onChange:s.onChange,onRemove:()=>s.onChange("")})}),e.jsx(c,{})]})})]})]}),e.jsx(E,{className:"my-6"}),e.jsx("div",{className:"flex justify-end",children:e.jsx(I,{type:"submit",disabled:m,children:"Update professional details"})})]})})})}function R(){return e.jsx(q,{title:"Professional Information",desc:"Update your professional details and work experience.",children:e.jsx(U,{})})}const J=P("/dashboard/profile/professional")({component:R});export{J as Route};
